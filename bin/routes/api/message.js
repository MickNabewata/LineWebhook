"use strict";var __extends=this&&this.__extends||function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)};return function(e,t){function o(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var apiBase_1=require("../apiBase"),config=require("config"),httpUtil_1=require("../../utils/httpUtil"),Example=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.postEvent=function(e,o,t){var s=this,n=e.body;n&&n.forEach(function(e,t){switch(e.type){case"message":s.receiveMessage(e,o)}})},t.prototype.getCheck=function(e){return e.body?"type"in e.body?null:"request body type is required.":"request body is required."},t.prototype.receiveMessage=function(e,t){var o,s;if(console.log("start"),e&&e.message&&e.message.type)switch(e.message.type){case"text":o=config.get("worker.text"),s=e.message;break;case"image":case"video":o="",s=e.message}""!=o?(console.log("doRequest"),this.doRequest(o,s,t)):(t.statusCode=200,t.end())},t.prototype.doRequest=function(e,t,s){httpUtil_1.default.post(e,{json:!0,formData:t,headers:{"Content-Type":"application/json"}},function(e,t,o){s.statusCode=t.statusCode,s.json(o)})},t}(apiBase_1.default);exports.default=Example;